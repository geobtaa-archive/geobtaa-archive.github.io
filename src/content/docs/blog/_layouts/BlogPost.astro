---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import 'src/styles/blog.css';

const { frontmatter } = Astro.props;

// Frontmatter we care about
const {
  title = '',
  description = '',
  excerpt,
  date,
  cover,
  tags = [],
} = frontmatter ?? {};
---

<StarlightPage
  frontmatter={{
    title,
    description: description || excerpt,
    template: 'splash',
    tableOfContents: false
  }}
>
  <!-- Optional post meta line under the Starlight header -->
  <div class="post-meta" style="margin-block: .5rem 1rem;">
    {date && <time datetime={new Date(date).toISOString()}>{new Date(date).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })}</time>}
    {tags.length > 0 && (
      <span style="margin-left:.5rem;opacity:.8;">
        â€¢ {tags.map((t, i) => <span class="chip" style="margin-right:.35rem;">{t}</span>)}
      </span>
    )}
  </div>

  <!-- Optional cover image (keeps your alt text) -->
  {cover?.image && (
    <div class="blog-band alt" style="margin-block: 0 1rem;">
      <figure class="figure" style="margin:0;">
        <img src={cover.image} alt={cover.alt || ''} />
        {cover?.alt && <figcaption>{cover.alt}</figcaption>}
      </figure>
    </div>
  )}

  <!-- Your MD/MDX content lands here -->
  <article class="sl-markdown-content">
    <slot />
  </article>
</StarlightPage>

<style>
/* small, quiet meta line */
.post-meta time { font-variant-numeric: tabular-nums; }
.post-meta { color: color-mix(in oklab, var(--sl-color-text) 70%, #666); font-size: .95rem; }

/* ensure chips look right here even if not imported elsewhere */
.chip {
  border: 1px solid var(--sl-color-hairline);
  border-radius: 999px;
  padding: .1rem .5rem;
  font-size: .8rem;
  background: #fff;
}
</style>
