---
const { label, value, delta = 0, spark = "" } = Astro.props;
const up = delta > 0, dn = delta < 0;
---
<div class="kpi">
  <div class="kpi-top">
    <span class="kpi-label">{label}</span>
    {spark && <span class="kpi-spark" set:html={spark} />}
  </div>
  <div class="kpi-row">
    <span class="kpi-value">{value}</span>
    {delta !== 0 && (
      <span class={`kpi-delta ${up?'up':''} ${dn?'down':''}`}>
        {up ? '▲' : '▼'} {Math.abs(delta)}%
      </span>
    )}
  </div>
</div>

<style>
.kpi{ background:#fff; border:1px solid var(--hair); border-radius:14px; padding:.9rem 1rem; display:flex; flex-direction:column; gap:.35rem; }
.kpi-top{ display:flex; align-items:center; justify-content:space-between; }
.kpi-label{ font-size:.8rem; letter-spacing:.04em; text-transform:uppercase; color: color-mix(in oklab, var(--ink) 70%, #777); }
.kpi-row{ display:flex; gap:.5rem; align-items:baseline; }
.kpi-value{ font-size:1.6rem; font-weight:700; color: var(--btaa-navy); }
.kpi-delta{ font-size:.9rem; font-weight:600; padding:.1rem .4rem; border-radius:999px; }
.kpi-delta.up{ color:#0b7a39; background: color-mix(in oklab, #0b7a39 10%, #fff); }
.kpi-delta.down{ color:#a33; background: color-mix(in oklab, #a33 10%, #fff); }
.kpi-spark svg{ display:block; inline-size:84px; block-size:24px; }
</style>
